# 色花堂磁力链接爬虫工具 v2.1.0

一个功能强大的磁力链接爬虫工具，支持多主题爬取、代理设置、定时任务和实时日志监控。

## 🚀 主要功能

### 📋 核心功能
- **多主题支持**: 支持多个主题的磁力链接爬取
- **双模式爬取**: 普通模式和热门模式
- **批量爬取**: 支持指定页面范围进行批量爬取
- **实时日志**: 首页实时显示操作日志，便于监控爬取过程

### 🔧 高级功能
- **代理支持**: 支持HTTP/HTTPS/SOCKS5代理，方便访问国外网站
- **代理持久化**: 代理设置自动保存，无需重复配置
- **定时任务**: 支持每日、每周、间隔执行三种调度模式
- **任务管理**: 完整的任务生命周期管理（创建、编辑、删除、启用/禁用）

### 🎨 用户界面
- **现代化UI**: 基于React + Ant Design的现代化界面
- **响应式设计**: 适配不同屏幕尺寸
- **实时更新**: 任务状态和日志实时更新
- **多页面导航**: 首页和设置页面分离

## 📦 快速开始

### 使用Docker运行

```bash
# 拉取镜像
docker pull wyh3210277395/sehuatang-crawler:v2.1.0

# 运行容器
docker run -d \
  --name sehuatang-crawler \
  -p 5000:5000 \
  -v ./data:/app/data \
  -v ./logs:/app/logs \
  wyh3210277395/sehuatang-crawler:v2.1.0
```

### 使用Docker Compose运行

```bash
# 创建docker-compose.yml文件
version: '3.8'
services:
  sehuatang-crawler:
    image: wyh3210277395/sehuatang-crawler:v2.1.0
    container_name: sehuatang-crawler
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=production
      - PYTHONUNBUFFERED=1
      - HTTP_PROXY=${HTTP_PROXY:-}
      - HTTPS_PROXY=${HTTPS_PROXY:-}
      - NO_PROXY=${NO_PROXY:-}
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5000/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  default:
    name: sehuatang-network
```

```bash
# 启动服务
docker-compose up -d
```

## 🎯 使用指南

### 1. 基本爬取
1. 访问 `http://localhost:5000`
2. 选择要爬取的主题
3. 选择爬取模式（普通/热门）
4. 设置页面范围（普通模式）
5. 配置代理（如需要）
6. 点击"开始爬取"

### 2. 代理设置
1. 点击左侧"设置"菜单
2. 在代理设置区域启用代理
3. 输入代理地址（格式：`http://host:port` 或 `socks5://host:port`）
4. 点击"保存代理设置"

### 3. 定时任务
1. 在设置页面点击"新建定时任务"
2. 配置任务名称、主题、模式、页面范围
3. 选择调度类型：
   - **每日执行**: 每天固定时间执行
   - **每周执行**: 每周固定时间执行
   - **间隔执行**: 按指定间隔时间执行
4. 设置执行时间
5. 保存任务

### 4. 任务监控
- **实时日志**: 首页实时显示操作日志
- **任务列表**: 查看所有爬取任务状态
- **下载结果**: 任务完成后可下载磁力链接文件

## 🔧 技术架构

### 后端技术栈
- **Python 3.9**: 主要开发语言
- **Flask**: Web框架
- **Selenium**: 网页自动化
- **Chrome/ChromeDriver**: 浏览器引擎
- **BeautifulSoup4**: HTML解析

### 前端技术栈
- **React 18**: 前端框架
- **Ant Design**: UI组件库
- **dayjs**: 日期处理

### 容器化
- **Docker**: 容器化部署
- **多阶段构建**: 优化镜像大小
- **健康检查**: 自动监控服务状态

## 📊 功能特性

### 爬取功能
- ✅ 多主题支持
- ✅ 普通模式爬取
- ✅ 热门模式爬取
- ✅ 批量页面爬取
- ✅ 代理支持
- ✅ 实时进度显示

### 任务管理
- ✅ 任务状态监控
- ✅ 任务日志查看
- ✅ 结果文件下载
- ✅ 任务删除管理

### 定时功能
- ✅ 每日定时执行
- ✅ 每周定时执行
- ✅ 间隔定时执行
- ✅ 任务启用/禁用
- ✅ 执行历史记录

### 系统功能
- ✅ 代理配置持久化
- ✅ 实时日志监控
- ✅ 健康状态检查
- ✅ 响应式界面设计

## 🔒 安全说明

- 本工具仅供学习和研究使用
- 请遵守当地法律法规
- 使用者需自行承担使用风险
- 请勿用于商业用途

## 📝 更新日志

### v2.1.0 (2024-08-23)
- ✨ 新增设置页面
- ✨ 新增代理配置持久化
- ✨ 新增定时任务管理
- ✨ 新增实时日志显示
- ✨ 新增多页面导航
- 🔧 优化用户界面
- 🔧 修复下载文件名问题

### v2.0.0 (2024-08-23)
- ✨ 新增代理支持
- ✨ 新增多页面爬取
- ✨ 新增热门模式
- 🔧 移除Nginx依赖
- 🔧 优化Docker构建

### v1.0.0 (2024-08-23)
- 🎉 初始版本发布
- ✨ 基础爬取功能
- ✨ Web界面
- ✨ Docker支持

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 📄 许可证

本项目仅供学习和研究使用，请遵守相关法律法规。

---

**注意**: 使用本工具时请确保遵守当地法律法规，使用者需自行承担使用风险。

