# 色花堂磁力链接爬虫工具使用说明

## 功能简介
这是一个用于从色花堂网站自动提取磁力链接的Python爬虫工具。

## 安装依赖
在运行程序之前，请确保安装了所需的Python包：

```bash
pip install -r requirements.txt
```

或者手动安装：
```bash
pip install selenium beautifulsoup4 webdriver-manager requests lxml
```

## 使用方法

### 1. 运行程序
```bash
python "sehuatang - 副本.py"
```

### 2. 选择主题
程序会显示可用的主题列表：
- 36. 亚洲无码 (支持热门模式)
- 37. 亚洲有码
- 2. 国产原创 (支持热门模式)
- 103. 高清中文字幕 (支持热门模式)
- 104. 素人原创
- 39. 动漫原创
- 152. 韩国主播 (支持热门模式)

### 3. 选择模式
- 1: 普通模式 - 爬取指定页面的内容
- 2: 热门模式 - 爬取热门内容（仅部分主题支持）

### 4. 输入页码
- 普通模式：输入要爬取的页面页码（如：1、2、3）
- 热门模式：自动使用第1页

## 输出结果
- 程序会在当前目录生成 `magnet_links.txt` 文件
- 每行一个磁力链接
- 同时会生成 `sehuatang_crawl.log` 日志文件

## 注意事项

### 1. 年龄验证
- 程序会自动处理年龄验证页面
- 如果自动处理失败，会提示手动操作

### 2. 反爬虫机制
- 程序已内置反爬虫措施
- 包含随机延迟和用户代理伪装

### 3. 网络要求
- 需要稳定的网络连接
- 建议使用代理或VPN访问

### 4. 法律声明
- 本工具仅用于学习和研究目的
- 请遵守当地法律法规
- 使用者需自行承担使用风险

## 故障排除

### 1. ChromeDriver错误
如果遇到ChromeDriver版本问题，程序会自动提示安装webdriver-manager：
```bash
pip install webdriver-manager
```

### 2. 网络连接问题
- 检查网络连接
- 尝试使用代理
- 确认网站可访问

### 3. 年龄验证失败
- 程序会自动尝试点击验证按钮
- 如果失败，会等待用户手动操作

## 技术特性

### 1. 智能重试机制
- 自动重试失败的请求
- 指数退避算法

### 2. 多种链接格式支持
- thread-xxx-xxx-xxx.html
- thread.php?tid=xxx
- forum.php?mod=viewthread&tid=xxx

### 3. 去重处理
- 自动去除重复的磁力链接
- 确保输出结果唯一

### 4. 详细日志
- 记录所有操作过程
- 便于调试和问题排查

## 更新日志
- v1.0: 基础功能实现
- v1.1: 添加年龄验证处理
- v1.2: 改进链接提取算法
- v1.3: 添加热门模式支持

